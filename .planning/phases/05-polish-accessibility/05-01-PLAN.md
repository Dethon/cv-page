---
phase: 05-polish-accessibility
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/hooks/useIntersectionObserver.ts
  - src/styles/animations.css
  - src/components/Hero.tsx
  - src/components/Experience.tsx
  - src/components/Skills.tsx
  - src/components/Projects.tsx
  - src/components/Education.tsx
  - src/components/Contact.tsx
autonomous: true

must_haves:
  truths:
    - "Sections fade in and slide up as they enter the viewport on scroll"
    - "Animations are disabled when prefers-reduced-motion is set to reduce"
    - "Hero section is visible on initial load without waiting for scroll"
  artifacts:
    - path: "src/hooks/useIntersectionObserver.ts"
      provides: "Reusable IntersectionObserver hook returning ref and isVisible"
      exports: ["useIntersectionObserver"]
    - path: "src/styles/animations.css"
      provides: "CSS classes for fade-in-up animation with reduced-motion override"
      contains: ".fade-in-up"
  key_links:
    - from: "src/components/Experience.tsx"
      to: "src/hooks/useIntersectionObserver.ts"
      via: "useIntersectionObserver hook call"
      pattern: "useIntersectionObserver"
    - from: "src/styles/animations.css"
      to: "src/styles/theme.css"
      via: "prefers-reduced-motion media query"
      pattern: "prefers-reduced-motion"
---

<objective>
Add scroll-triggered fade-in/slide-up animations to all content sections.

Purpose: Sections animate into view as the user scrolls, creating a polished professional feel. Animations must respect the prefers-reduced-motion system preference per WCAG 2.3.3.
Output: useIntersectionObserver hook, animations.css, and all section components updated with animation classes.
</objective>

<execution_context>
@/home/dethon/.claude/get-shit-done/workflows/execute-plan.md
@/home/dethon/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-polish-accessibility/05-RESEARCH.md
@src/styles/theme.css
@src/index.css
@src/components/sections.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create useIntersectionObserver hook and animation CSS</name>
  <files>src/hooks/useIntersectionObserver.ts, src/styles/animations.css</files>
  <action>
    Create `src/hooks/useIntersectionObserver.ts`:
    - Accept options parameter with defaults: `{ threshold: 0.1, rootMargin: '0px 0px -50px 0px' }`
    - Return `{ ref, isVisible }` where ref is `useRef<HTMLElement>(null)` and isVisible is boolean state
    - Use IntersectionObserver API: when entry.isIntersecting becomes true, set isVisible to true and unobserve (animate once only)
    - Clean up observer on unmount via useEffect return
    - Memoize options with useMemo or use useRef to avoid re-creating observer on every render (stable options reference)

    Create `src/styles/animations.css`:
    - `.fade-in-up` class: opacity 0, transform translateY(30px), transition opacity 0.6s ease-out + transform 0.6s ease-out
    - `.fade-in-up.visible` class: opacity 1, transform translateY(0)
    - `@media (prefers-reduced-motion: reduce)` block: `.fade-in-up` gets transform: none, transition: opacity 0.3s ease-out only. `.fade-in-up.visible` also gets transform: none. No stagger delays.
    - Stagger support for child animations: `.fade-in-up.visible:nth-child(1)` through `:nth-child(4)` with transition-delay 0.1s increments
    - In reduced motion media query, override all nth-child delays to 0s using `.fade-in-up.visible:nth-child(n)` selector
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>Hook file exists and exports useIntersectionObserver. CSS file has .fade-in-up class with visible state and prefers-reduced-motion override.</done>
</task>

<task type="auto">
  <name>Task 2: Apply scroll animations to all section components</name>
  <files>src/components/Hero.tsx, src/components/Experience.tsx, src/components/Skills.tsx, src/components/Projects.tsx, src/components/Education.tsx, src/components/Contact.tsx</files>
  <action>
    Import animations.css in each component (add `import '../styles/animations.css'` alongside existing CSS imports).
    Import and use `useIntersectionObserver` hook in each component.

    For each section component:
    1. Call `const { ref, isVisible } = useIntersectionObserver();`
    2. Add `ref={ref as React.RefObject<HTMLElement>}` to the outer `<section>` element (cast ref to match section element type, e.g., `ref as React.RefObject<HTMLDivElement>` — use the appropriate type for section: `HTMLElement` works for `<section>`)
    3. Add className: append `fade-in-up ${isVisible ? 'visible' : ''}` to existing className

    Special case for Hero:
    - The Hero is above the fold and should be visible immediately. Use the hook but with a lower threshold (0.01) so it triggers on load. OR simply set the hero to always have the `visible` class since it's the first section. Simplest: skip the hook for Hero entirely and just add `fade-in-up visible` classes directly (it's always visible on page load).

    Do NOT change any existing structure, content, or semantic HTML in the components. Only add the hook usage and CSS classes.

    Ensure the ref typing works with the existing JSX. The `<section>` element type is HTMLElement. If TypeScript complains about ref types, use a callback ref pattern or cast appropriately.
  </action>
  <verify>`npm run build` succeeds without errors. Open `npm run preview` and scroll — sections should animate in (visually verify via build output, no errors in console).</verify>
  <done>All 6 section components have fade-in-up animation on scroll. Hero is visible immediately. Animations respect prefers-reduced-motion.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes (no type errors)
- `npm run build` succeeds
- Grep for `useIntersectionObserver` shows import in all section components
- Grep for `prefers-reduced-motion` in animations.css confirms reduced motion handling
- Grep for `fade-in-up` in all section component files confirms class application
</verification>

<success_criteria>
- All content sections (Hero, Experience, Skills, Projects, Education, Contact) have fade-in-up animation
- Hero section is visible on initial page load without scroll
- Sections below the fold animate in as user scrolls down
- With prefers-reduced-motion: reduce, animations are disabled (opacity-only fade, no transform)
- Build succeeds with no TypeScript or CSS errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-polish-accessibility/05-01-SUMMARY.md`
</output>
