---
phase: 05-polish-accessibility
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/SEOHead.tsx
  - src/App.tsx
  - src/App.css
  - src/main.tsx
  - src/index.css
  - index.html
  - src/components/Navigation.tsx
  - src/components/Navigation.css
  - src/styles/theme.css
autonomous: true

must_haves:
  truths:
    - "Page has proper SEO meta tags including Open Graph and Twitter Cards"
    - "Skip-to-content link is available for keyboard users"
    - "All interactive elements have visible focus indicators"
    - "Color contrast meets 4.5:1 ratio in both light and dark mode"
    - "Navigation has proper aria-label for screen readers"
  artifacts:
    - path: "src/components/SEOHead.tsx"
      provides: "Centralized SEO meta tag component using react-helmet-async"
      exports: ["SEOHead"]
    - path: "index.html"
      provides: "Static fallback meta tags for crawlers that don't execute JS"
      contains: "og:title"
  key_links:
    - from: "src/main.tsx"
      to: "react-helmet-async"
      via: "HelmetProvider wrapping App"
      pattern: "HelmetProvider"
    - from: "src/App.tsx"
      to: "src/components/SEOHead.tsx"
      via: "SEOHead component rendered inside App"
      pattern: "SEOHead"
    - from: "src/App.tsx"
      to: "skip-to-content link"
      via: "anchor tag with href #main-content"
      pattern: "skip-link"
---

<objective>
Add SEO meta tags and WCAG 2.2 Level AA accessibility compliance.

Purpose: Ensure the site is discoverable by search engines and social media crawlers, and is fully usable by keyboard-only users and screen reader users. These are the final requirements (TECH-02, TECH-04) for a professional-quality portfolio.
Output: SEOHead component with react-helmet-async, skip-to-content link, visible focus indicators, aria landmarks, contrast-verified theme colors, and static meta tag fallbacks in index.html.
</objective>

<execution_context>
@/home/dethon/.claude/get-shit-done/workflows/execute-plan.md
@/home/dethon/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-polish-accessibility/05-RESEARCH.md
@src/App.tsx
@src/main.tsx
@src/index.css
@src/styles/theme.css
@index.html
@src/components/Navigation.tsx
@src/components/Navigation.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-helmet-async and create SEO component</name>
  <files>src/components/SEOHead.tsx, src/main.tsx, src/App.tsx, index.html</files>
  <action>
    1. Install react-helmet-async: `npm install react-helmet-async`

    2. Create `src/components/SEOHead.tsx`:
       - Import `{ Helmet }` from `react-helmet-async`
       - Export `SEOHead` component with hardcoded CV portfolio meta tags:
         - title: "Juan Francisco Crespo Galan | Senior Software Engineer"
         - description: "Senior Software Engineer with 10+ years of experience in embedded systems, full-stack web development, data engineering, and machine learning. Based in Spain."
         - og:type: "website"
         - og:url: constructed from `window.location.origin + import.meta.env.BASE_URL`
         - og:title, og:description: same as primary
         - og:image: `${import.meta.env.BASE_URL}og-image.png` (placeholder path for future)
         - twitter:card: "summary_large_image"
         - twitter:title, twitter:description: same as primary
         - Also set `<html lang="en">` via Helmet
         - Also set canonical URL via `<link rel="canonical">`

    3. Update `src/main.tsx`:
       - Import `{ HelmetProvider }` from `react-helmet-async`
       - Wrap `<App />` inside `<HelmetProvider>` (inside StrictMode)

    4. Update `src/App.tsx`:
       - Import and render `<SEOHead />` as first child inside the fragment
       - Add skip-to-content link BEFORE Navigation: `<a href="#main-content" className="skip-link">Skip to main content</a>`
       - Add `id="main-content"` to the `<main>` element
       - Add `role="main"` to `<main>` (redundant but harmless for older assistive tech)

    5. Update `index.html` with STATIC fallback meta tags in `<head>` for crawlers that don't execute JS:
       - `<meta name="description" content="Senior Software Engineer with 10+ years of experience...">`
       - `<meta property="og:title" content="Juan Francisco Crespo Galan | Senior Software Engineer">`
       - `<meta property="og:description" content="Senior Software Engineer with 10+ years of experience...">`
       - `<meta property="og:type" content="website">`
       - `<meta property="og:url" content="https://dethon.github.io/cv-page/">`
       - `<meta property="og:image" content="https://dethon.github.io/cv-page/og-image.png">`
       - `<meta property="twitter:card" content="summary_large_image">`
       - `<meta property="twitter:title" content="Juan Francisco Crespo Galan | Senior Software Engineer">`
       - `<meta property="twitter:description" content="Senior Software Engineer with 10+ years of experience...">`
       - Keep the existing `<title>` tag
       - Note: react-helmet-async will override these at runtime, but static tags ensure crawlers see them
  </action>
  <verify>`npm run build` succeeds. Check build output `dist/index.html` contains og: meta tags.</verify>
  <done>SEOHead component renders meta tags. index.html has static fallback meta tags. HelmetProvider wraps the app.</done>
</task>

<task type="auto">
  <name>Task 2: Accessibility improvements - focus indicators, skip link, aria, contrast</name>
  <files>src/App.css, src/index.css, src/components/Navigation.tsx, src/components/Navigation.css, src/styles/theme.css</files>
  <action>
    1. Add skip-link styles to `src/App.css`:
       ```
       .skip-link {
         position: absolute;
         top: -40px;
         left: 0;
         background: var(--accent);
         color: #ffffff;
         padding: 8px 16px;
         text-decoration: none;
         z-index: 10000;
         font-weight: 600;
         transition: top 0.2s ease;
       }

       .skip-link:focus {
         top: 0;
       }
       ```

    2. Add global focus indicator styles to `src/index.css`:
       - `:focus-visible` selector on `a, button, input, textarea, select, [tabindex]`:
         outline: 3px solid var(--accent), outline-offset: 2px, border-radius: 2px
       - `:focus:not(:focus-visible)` selector: outline: none (hide focus ring for mouse users)
       - Under `@media (prefers-reduced-motion: reduce)`, skip-link should have `transition: none`

    3. Update `src/components/Navigation.tsx`:
       - Add `aria-label="Primary navigation"` to the outer `<nav>` element
       - The hamburger button already has aria-label and aria-expanded (good, keep as-is)
       - Add `aria-controls` attribute to hamburger button referencing the nav controls id
       - Add `id="nav-controls"` to the `.nav__controls` div so aria-controls can reference it

    4. Update `src/components/Navigation.css`:
       - Ensure nav links have adequate touch targets on mobile (already 1rem padding, which is fine)
       - Under `@media (prefers-reduced-motion: reduce)`, disable the hamburger line transitions and the nav__controls slide transition

    5. Verify and document color contrast in `src/styles/theme.css` by adding CSS comments:
       Light mode contrasts (against --bg-primary #ffffff):
       - --text-primary: #111827 -> ~16:1 ratio (PASSES 4.5:1)
       - --text-secondary: #6b7280 -> ~5.0:1 ratio (PASSES 4.5:1)
       - --accent: #3b82f6 -> ~4.0:1 ratio (FAILS 4.5:1 for normal text)

       Dark mode contrasts (against --bg-primary #0f172a):
       - --text-primary: #f1f5f9 -> ~13.2:1 ratio (PASSES 4.5:1)
       - --text-secondary: #94a3b8 -> ~6.4:1 ratio (PASSES 4.5:1)
       - --accent: #60a5fa -> ~5.7:1 ratio (PASSES 4.5:1)

       FIX the light mode accent color: change --accent from #3b82f6 to #2563eb (which gives ~4.6:1 ratio on white, passes 4.5:1). Update --accent-hover accordingly to #1d4ed8. Also verify the accent color passes 3:1 for large text and UI components.

       For dark mode, --accent-hover: #93bbfc needs verification against dark bg. It should be fine (~8:1) but add the comment.

    6. Ensure the `<html lang="en">` attribute is set. It's already in index.html but verify SEOHead also sets it via Helmet for consistency.
  </action>
  <verify>`npm run build` succeeds. Grep for `skip-link`, `focus-visible`, `aria-label="Primary navigation"` in source files confirms accessibility additions. Verify accent color change is in theme.css.</verify>
  <done>Skip-to-content link works (visible on Tab from page top). Focus indicators visible on all interactive elements via keyboard. Navigation has proper ARIA. Color contrast meets 4.5:1 in both themes. Reduced motion respected.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes
- `npm run build` succeeds
- dist/index.html contains og:title, og:description, twitter:card meta tags
- Grep for `HelmetProvider` in main.tsx confirms wrapper
- Grep for `skip-link` in App.tsx and App.css confirms skip navigation
- Grep for `focus-visible` in index.css confirms focus indicators
- Grep for `aria-label="Primary navigation"` in Navigation.tsx confirms landmark
- Theme.css --accent value is #2563eb (light mode, passes 4.5:1)
</verification>

<success_criteria>
- SEO meta tags render in document head (title, description, OG, Twitter Cards)
- index.html has static fallback meta tags for non-JS crawlers
- Skip-to-content link appears on Tab keypress and jumps to main content
- All interactive elements show visible 3px accent-colored focus ring on keyboard focus
- Focus ring hidden for mouse clicks (focus:not(:focus-visible))
- Navigation has aria-label="Primary navigation"
- All color contrast ratios meet WCAG AA 4.5:1 minimum in both themes
- Build succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-polish-accessibility/05-02-SUMMARY.md`
</output>
