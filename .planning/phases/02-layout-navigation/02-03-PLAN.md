---
phase: 02-layout-navigation
plan: 03
type: execute
wave: 2
depends_on: ["02-01", "02-02"]
files_modified:
  - src/App.tsx
  - src/App.css
  - public/404.html
autonomous: false

must_haves:
  truths:
    - "App.tsx composes Navigation, ThemeToggle, and all 6 sections into complete page"
    - "Custom 404 page displays for invalid URLs with link back to home"
    - "404 page matches site theme (uses same CSS custom properties and FOUC prevention)"
    - "Full page renders correctly with theme toggle, sticky nav, and scrollable sections"
  artifacts:
    - path: "src/App.tsx"
      provides: "Main application composition"
      contains: "Navigation"
    - path: "src/App.css"
      provides: "App-level layout styles"
    - path: "public/404.html"
      provides: "Custom branded 404 error page"
      contains: "404"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/Navigation.tsx"
      via: "import and render"
      pattern: "import.*Navigation"
    - from: "src/App.tsx"
      to: "src/components/ThemeToggle.tsx"
      via: "import and render"
      pattern: "import.*ThemeToggle"
    - from: "src/App.tsx"
      to: "src/components/Hero.tsx"
      via: "import and render"
      pattern: "import.*Hero"
    - from: "public/404.html"
      to: "site home"
      via: "link href to /cv-page/"
      pattern: "href.*cv-page"
---

<objective>
Compose all components from Plans 01 and 02 into the final App layout, create the custom 404 page, and verify everything works together visually.

Purpose: This plan wires together the theme system (Plan 01) and the section/navigation structure (Plan 02) into a working page, adds the 404 requirement, and provides a human verification checkpoint for visual/functional correctness.

Output: Complete App.tsx composition, App.css layout styles, branded 404.html, and verified working page.
</objective>

<execution_context>
@/home/dethon/.claude/get-shit-done/workflows/execute-plan.md
@/home/dethon/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-layout-navigation/02-RESEARCH.md

@.planning/phases/02-layout-navigation/02-01-SUMMARY.md
@.planning/phases/02-layout-navigation/02-02-SUMMARY.md

@src/App.tsx
@src/App.css
@vite.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Compose App layout and create 404 page</name>
  <files>
    src/App.tsx
    src/App.css
    public/404.html
  </files>
  <action>
1. Rewrite `src/App.tsx` to compose the full page layout:
   ```tsx
   import { Navigation } from './components/Navigation'
   import { ThemeToggle } from './components/ThemeToggle'
   import { Hero } from './components/Hero'
   import { Experience } from './components/Experience'
   import { Skills } from './components/Skills'
   import { Projects } from './components/Projects'
   import { Education } from './components/Education'
   import { Contact } from './components/Contact'
   import './App.css'

   function App() {
     return (
       <>
         <Navigation />
         <main>
           <Hero />
           <Experience />
           <Skills />
           <Projects />
           <Education />
           <Contact />
         </main>
       </>
     )
   }

   export default App
   ```
   - Place ThemeToggle INSIDE the Navigation component (it should be part of the nav bar, not floating separately). If Plan 02's Navigation doesn't already include ThemeToggle, import ThemeToggle in App.tsx and position it inside the nav area. Alternatively, pass ThemeToggle as a child or render it adjacent to nav. The simplest approach: render ThemeToggle right after Navigation if Navigation doesn't include it, and use CSS to position it in the nav bar area (position: fixed or absolute within the sticky nav context).
   - Actually, the cleanest approach: have Navigation accept and render a ThemeToggle slot, OR simply import ThemeToggle inside Navigation.tsx. Check what Plan 02 built and integrate accordingly. If Navigation does NOT include ThemeToggle, the preferred integration is to import ThemeToggle in Navigation.tsx and render it in the nav bar next to the links.
   - Ensure `<main>` wraps all sections for semantic HTML
   - Remove the old placeholder content entirely

2. Update `src/App.css`:
   - Remove any leftover placeholder styles
   - Add minimal app-level styles:
     - `main { min-height: 100vh; }`
     - Any needed layout adjustments
   - Keep styles minimal -- component-level styles live with components

3. Create `public/404.html`:
   - Full standalone HTML page (not a React component -- GitHub Pages serves this directly)
   - Include the same FOUC prevention script as index.html
   - Include inline CSS that replicates the theme CSS custom properties (both :root and [data-theme='dark'])
   - Content: centered layout with "404" large heading, "Page Not Found" subheading, brief message ("The page you're looking for doesn't exist."), and a link back to home (`/cv-page/`)
   - Match the site's font-family (system-ui stack from index.css)
   - Style the link as a button: `background-color: var(--accent)`, white text, padding, border-radius, hover state
   - Must be fully self-contained (no external CSS/JS dependencies) since it's served by GitHub Pages for any non-existent route
   - Keep the base path `/cv-page/` in the home link (matches vite.config.ts base)
  </action>
  <verify>
    Run `npm run build` -- succeeds. Check that `dist/index.html` renders the full app. Verify `public/404.html` exists and contains a link to `/cv-page/`. Start dev server with `npm run dev` and verify the page loads without console errors.
  </verify>
  <done>
    App.tsx imports and renders Navigation, ThemeToggle, and all 6 section components wrapped in semantic main element. App.css has minimal layout styles. 404.html is a standalone branded error page with theme support, FOUC prevention, and link back to home. Build passes and dev server shows the complete page.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify complete layout, theme, navigation, responsive, and 404</name>
  <what-built>
    Complete Phase 2 implementation: theme system with dark/light toggle, 6-section layout with sticky navigation, scroll-spy active highlighting, responsive hamburger menu, and custom 404 page.
  </what-built>
  <how-to-verify>
    Start dev server: `npm run dev`

    **Theme verification:**
    1. Open http://localhost:5173/cv-page/ in browser
    2. Check that the page loads WITHOUT a flash of wrong theme colors
    3. Click the theme toggle button -- page should switch between light and dark mode smoothly
    4. Refresh the page -- theme preference should persist (same theme as before refresh)
    5. Check the toggle button has appropriate sun/moon icon and swaps correctly

    **Navigation verification:**
    6. Scroll down through all 6 sections -- nav bar should remain sticky at top
    7. As you scroll, the active section should be highlighted in the nav
    8. Click a nav link (e.g., "Education") -- page should smooth-scroll to that section
    9. After scrolling, the section should not be hidden behind the nav bar

    **Responsive verification:**
    10. Open browser DevTools, toggle device toolbar
    11. At 320px width: navigation should show hamburger menu, clicking it reveals links vertically
    12. At 768px width: navigation links should be visible without hamburger
    13. At 1200px width: content should be centered with max-width constraint
    14. Sections should have appropriate padding at each breakpoint

    **404 verification:**
    15. Navigate to http://localhost:5173/cv-page/nonexistent -- should show custom 404 page (note: this may only work in production on GitHub Pages; in dev, Vite handles routing differently. Alternatively, open `public/404.html` directly in the browser to verify styling)
    16. 404 page should match site theme (try toggling stored theme in localStorage and refreshing)
    17. "Back to Home" link should point to /cv-page/
  </how-to-verify>
  <resume-signal>Type "approved" if everything looks correct, or describe any issues you see.</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. Dev server loads complete page with all sections and navigation
3. Theme toggle switches between light and dark mode
4. Theme persists across page refresh
5. Navigation sticks to top and highlights active section
6. Smooth scroll works when clicking nav links
7. Hamburger menu appears on mobile viewports
8. 404.html exists in public/ with correct branding and home link
9. Human verification approved
</verification>

<success_criteria>
- Complete single-page layout renders with 6 sections, sticky nav, and theme toggle
- Dark/light mode toggle works with persistence and no FOUC
- Navigation highlights active section via scroll-spy
- Responsive: hamburger on mobile, horizontal nav on desktop
- 404 page matches site branding and links home
- Human-verified: visual appearance, functionality, and responsiveness confirmed
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-navigation/02-03-SUMMARY.md`
</output>
